<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Intermediate Python - Concepts, Tools and Packaging: Static Code Analysis</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/incubator/favicon-16x16.png"><link rel="manifest" href="favicons/incubator/site.webmanifest"><link rel="mask-icon" href="favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/07-static-code-analysis.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Intermediate Python - Concepts, Tools and Packaging
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Intermediate Python - Concepts, Tools and Packaging
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="reference.html">Reference</a></li><li><a class="dropdown-item" href="workshop_resources.html">Workshop Resources</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Intermediate Python - Concepts, Tools and Packaging
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 71%" class="percentage">
    71%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 71%" aria-valuenow="71" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/07-static-code-analysis.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-virtual-environments.html">1. Virtual Environments</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-creating-a-module.html">2. Creating A Module</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-class-objects.html">3. Class Objects</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-unit-testing.html">4. Unit Testing</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-extending-classes.html">5. Extending Classes with Inheritance</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-composition.html">6. Inheritance and Composition</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        7. Static Code Analysis
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#what-is-static-code-analysis">What is Static Code Analysis?</a></li>
<li><a href="#ruff">Ruff</a></li>
<li><a href="#docstrings">Docstrings</a></li>
<li><a href="#mypy">Mypy</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-building-and-deploying.html">8. Building and Deploying a Package</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li><li><a href="workshop_resources.html">Workshop Resources</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="06-composition.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="08-building-and-deploying.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="06-composition.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Inheritance and
        </a>
        <a class="chapter-link float-end" href="08-building-and-deploying.html" rel="next">
          Next: Building and...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Static Code Analysis</h1>
        <p>Last updated on 2025-09-16 |

        <a href="https://github.com/jonathan-hartman/python-intermediate-tool/edit/main/episodes/07-static-code-analysis.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>What is static code analysis?</li>
<li>How can static code analysis tools help improve code quality?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Implement <code>ruff</code> and <code>mypy</code> in a Python
project</li>
<li>Understand how to read and fix issues reported by <code>ruff</code>
and <code>mypy</code>
</li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="what-is-static-code-analysis">What is Static Code Analysis?<a class="anchor" aria-label="anchor" href="#what-is-static-code-analysis"></a></h2>
<hr class="half-width"><p>Static code analysis tools are programs or scripts that analyze
source code without executing it in order to identify potential issues,
bugs, or code smells. These tools can help developers improve code
quality, maintainability, and adherence to coding standards.</p>
<p>We’re going to look at two static code analysis tools in this
episode: <code>ruff</code> and <code>mypy</code>.</p>
<p>Each of these tools can be run from the command line, and they can
also be integrated into your development workflow, such as in your text
editor, as a pre-commit hook, or in your continuous integration (CI)
pipeline.</p>
</section><section><h2 class="section-heading" id="ruff">Ruff<a class="anchor" aria-label="anchor" href="#ruff"></a></h2>
<hr class="half-width"><p><a href="https://docs.astral.sh/ruff/" class="external-link">Ruff</a> is a fast Python
linter and code formatter that takes over the roles of several other
tools, including <code>flake8</code>, <code>pylint</code>, and
<code>isort</code>.</p>
<p>We can install <code>ruff</code> as a development dependency using
<code>uv</code>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">uv</span> add ruff <span class="at">--dev</span></span></code></pre>
</div>
<p>We can then run <code>ruff</code> on our codebase to identify any
issues:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">uv</span> run ruff check .</span></code></pre>
</div>
<p>Did you get any output? Depending on your IDE and it’s settings, you
might have already fixed some of the issues.</p>
<p>The default configuration for <code>ruff</code> only checks for a few
types of issues. We can customize the configuration by adding a section
for <code>ruff</code> in our <code>pyproject.toml</code> file:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">[tool.ruff]</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co"># Exclude specific files and directories from ruff</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="dt">exclude</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>    <span class="st">".venv"</span><span class="op">,</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="st">"__init__.py"</span><span class="op">,</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="dt">line-length</span> <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="dt">indent-width</span> <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="kw">[tool.ruff.format]</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="dt">quote-style</span> <span class="op">=</span> <span class="st">"double"</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="dt">indent-style</span> <span class="op">=</span> <span class="st">"space"</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="dt">skip-magic-trailing-comma</span> <span class="op">=</span> <span class="cn">false</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="dt">line-ending</span> <span class="op">=</span> <span class="st">"auto"</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="kw">[tool.ruff.lint]</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="co"># Enable specific linting rules</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="co"># - "D": Docstring-related rules (Not included for this workshop)</span></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a><span class="co"># - "E", "W": PEP8 style errors</span></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a><span class="co"># - "F": Flake8 compatibility</span></span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a><span class="co"># - "I": Import-related rules (isort)</span></span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a><span class="co"># - "B": Bugbear (Extended pycodesyle checks)</span></span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a><span class="co"># - "PL": Pylint compatibility</span></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a><span class="co"># - "C90": McCabe complexity checks (identify code with large numbers of paths - should be refactored)</span></span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a><span class="co"># - "N": Naming conventions for classes, functions, variables, etc.</span></span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a><span class="co"># - "ERA": Remove commented out code</span></span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a><span class="co"># - "RUF": Ruff-specific rules</span></span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a><span class="co"># - "TID": Tidy Imports</span></span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a><span class="dt">select</span> <span class="op">=</span> <span class="op">[</span><span class="st">"E"</span><span class="op">,</span> <span class="st">"W"</span><span class="op">,</span> <span class="st">"F"</span><span class="op">,</span> <span class="st">"I"</span><span class="op">,</span> <span class="st">"B"</span><span class="op">,</span> <span class="st">"PL"</span><span class="op">,</span> <span class="st">"C90"</span><span class="op">,</span> <span class="st">"N"</span><span class="op">,</span> <span class="st">"ERA"</span><span class="op">,</span> <span class="st">"RUF"</span><span class="op">,</span> <span class="st">"TID"</span><span class="op">,</span> <span class="st">"SIM"</span><span class="op">]</span></span>
<span id="cb3-30"><a href="#cb3-30" tabindex="-1"></a></span>
<span id="cb3-31"><a href="#cb3-31" tabindex="-1"></a><span class="co"># These are Personal preference</span></span>
<span id="cb3-32"><a href="#cb3-32" tabindex="-1"></a><span class="co"># D203 - Don't require a space between the docstring and the class or function definition</span></span>
<span id="cb3-33"><a href="#cb3-33" tabindex="-1"></a><span class="co"># D212 - The summary of the docstring can go on the line below the triple quotes</span></span>
<span id="cb3-34"><a href="#cb3-34" tabindex="-1"></a><span class="dt">ignore</span> <span class="op">=</span> <span class="op">[</span><span class="st">"D203"</span><span class="op">,</span> <span class="st">"D212"</span><span class="op">]</span></span></code></pre>
</div>
<p>This configuration adds a number of additional rules to check for.
This is the output from running this one on our codebase:</p>
<pre><code>I001 [*] Import block is un-sorted or un-formatted
 --&gt; src\textanalysis_tool\readers\epub_reader.py:1:1
  |
1 | / import re
2 | |
3 | | from bs4 import BeautifulSoup
4 | | import ebooklib
5 | |
6 | | from textanalysis_tool.readers.base_reader import BaseReader
  | |____________________________________________________________^
  |
help: Organize imports

E501 Line too long (136 &gt; 100)
  --&gt; src\textanalysis_tool\readers\text_reader.py:10:101
   |
 8 | …
 9 | …)\]"
10 | …GUTENBERG EBOOK .*? \*\*\*(.*?)\*\*\* END OF THE PROJECT GUTENBERG EBOOK .*? \*\*\*"
   |                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
11 | …
12 | …
   |

I001 [*] Import block is un-sorted or un-formatted
 --&gt; tests\readers\test_html_reader.py:1:1
  |
1 | / import pytest
2 | | from unittest.mock import mock_open
3 | |
4 | | from textanalysis_tool.readers.html_reader import HTMLReader
  | |____________________________________________________________^
5 |
6 |   TEST_DATA = """
  |
help: Organize imports

PLR2004 Magic value used in comparison, consider replacing `1234` with a constant variable
  --&gt; tests\readers\test_html_reader.py:41:30
   |
39 |     assert metadata["title"] == "Test Document"
40 |     assert metadata["author"] == "Test Author"
41 |     assert metadata["id"] == 1234
   |                              ^^^^
   |

I001 [*] Import block is un-sorted or un-formatted
 --&gt; tests\readers\test_text_reader.py:1:1
  |
1 | / import pytest
2 | | from unittest.mock import mock_open
3 | |
4 | | from textanalysis_tool.readers.text_reader import TextReader
  | |____________________________________________________________^
5 |
6 |   TEST_DATA = """
  |
help: Organize imports

PLR2004 Magic value used in comparison, consider replacing `1234` with a constant variable
  --&gt; tests\readers\test_text_reader.py:40:30
   |
38 |     assert metadata["title"] == "Test Document"
39 |     assert metadata["author"] == "Test Author"
40 |     assert metadata["id"] == 1234
   |                              ^^^^
   |

PLR2004 Magic value used in comparison, consider replacing `1234` with a constant variable
  --&gt; tests\test_document.py:21:50
   |
19 |     assert doc.title == "Test Document"
20 |     assert doc.author == "Test Author"
21 |     assert isinstance(doc.id, int) and doc.id == 1234
   |                                                  ^^^^
   |

PLR2004 Magic value used in comparison, consider replacing `2` with a constant variable
  --&gt; tests\test_document.py:26:30
   |
24 | def test_line_count():
25 |     doc = Document(filepath="dummy_path.txt", reader=MockReader())
26 |     assert doc.line_count == 2
   |                              ^
   |

PLR2004 Magic value used in comparison, consider replacing `2` with a constant variable
  --&gt; tests\test_document.py:31:47
   |
29 | def test_get_word_occurrence():
30 |     doc = Document(filepath="dummy_path.txt", reader=MockReader())
31 |     assert doc.get_word_occurrence("test") == 2
   |                                               ^
   |

Found 9 errors.
[*] 3 fixable with the `--fix` option.</code></pre>
<div class="section level3">
<h3 id="auto-fixing-issues">Auto-fixing Issues<a class="anchor" aria-label="anchor" href="#auto-fixing-issues"></a></h3>
<p>You notice right away that the end of the message says that 3 of the
issues are fixable with the <code>--fix</code> option. We can run
<code>ruff</code> again with this option to automatically fix these
issues:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">uv</span> run ruff check . <span class="at">--fix</span></span></code></pre>
</div>
<p>Ruff will automatically fix issues that have very clear solutions,
such as sorting imports and fixing spacing. This command will modify
your source files, so be sure to review the changes just in case, but it
should never modify the logic of your code.</p>
</div>
<div class="section level3">
<h3 id="ignoring-files-and-rules">Ignoring Files and Rules<a class="anchor" aria-label="anchor" href="#ignoring-files-and-rules"></a></h3>
<p>Some of the issues reported by <code>ruff</code> don’t really make
sense for our project. For example, it is complaining about “magic
numbers” in our tests. These are numbers that appear directly in the
code without being assigned to a named constant. In tests, this is often
fine, since the numbers are used in a clear context, and assigning them
to a constant variable would just add unnecessary complexity.</p>
<p>We can tell <code>ruff</code> to ignore specific rules for specific
files or directories. We already have an example of this in our
<code>pyproject.toml</code> file, where we tell <code>ruff</code> to
ignore the <code>__init__.py</code> files in our codebase. We can add
the following to ignore the magic number rule (<code>PLR2004</code>) in
our tests directory:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">TOML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode toml" tabindex="0"><code class="sourceCode toml"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Ignore magic number rule in tests</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="kw">[tool.ruff.lint.per-file-ignores]</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="dt">"tests/**"</span> <span class="op">=</span> <span class="op">[</span><span class="st">"PLR2004"</span><span class="op">]</span></span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="docstrings">Docstrings<a class="anchor" aria-label="anchor" href="#docstrings"></a></h2>
<hr class="half-width"><p>We we had removed the check for docstrings (<code>D</code>) from our
<code>ruff</code> configuration, but let’s just re-enable it for a
moment to see what it reports and how to fix it.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="cf">select</span> <span class="ex">=</span> [<span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"W"</span>, <span class="st">"F"</span>, <span class="st">"I"</span>, <span class="st">"B"</span>, <span class="st">"PL"</span>, <span class="st">"C90"</span>, <span class="st">"N"</span>, <span class="st">"ERA"</span>, <span class="st">"RUF"</span>, <span class="st">"TID"</span>, <span class="st">"SIM"</span>]</span></code></pre>
</div>
<p>To run <code>ruff</code> on a single file, we can specify the file
path instead of a directory:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">uv</span> run ruff check src/textanalysis_tool/document.py</span></code></pre>
</div>
<p>It looks like we get six errors, all related to missing
docstrings.</p>
<div class="section level3">
<h3 id="what-exactly-is-a-docstring">What exactly is a docstring?<a class="anchor" aria-label="anchor" href="#what-exactly-is-a-docstring"></a></h3>
<p>A docstring is a special type of comment that is used to document a
module, class, method, or function in Python. Docstrings are written
using triple quotes (<code>"""</code>) and are placed immediately after
the definition of the module, class, method, or function they are
documenting.</p>
<p>There are several different styles for writing docstrings:</p>
<ul><li><a href="https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings" class="external-link">Google
Style</a></li>
<li><a href="https://numpydoc.readthedocs.io/en/latest/format.html" class="external-link">NumPy
Style</a></li>
<li><a href="https://peps.python.org/pep-0287/" class="external-link">reStructuredText (reST)
Style</a></li>
</ul><p>The choice of style often depends on the conventions used in a
particular project or organization.</p>
<p>Let’s stick with the Google style for this project. Here’s an example
of a docstring for one of the functions in our <code>Document</code>
class:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="kw">def</span> get_word_occurrence(<span class="va">self</span>, word: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="co">    Count the number of occurrences of the given word in the document content.</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">        word (str): The word to count occurrences of.</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="co">        int: The number of occurrences of the word in the document content.</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">self</span>.content.lower().count(word.lower())</span></code></pre>
</div>
<p>We can see that the Docstring is made up of different sections:</p>
<ul><li>A brief summary of what the function does</li>
<li>An <code>Args</code> section that describes the function’s
parameters</li>
<li>A <code>Returns</code> section that describes what the function
returns</li>
</ul><div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>Docstrings are not interpreted by python, so don’t affect the runtime
behavior of your code. They are primarily for documentation purposes,
and can be accessed using the built-in <code>help()</code> function.</p>
</div>
</div>
</div>
<p>Running the <code>ruff</code> command again shows that we have fixed
one of the issues in this file.</p>
<div id="challenge-1-docstrings-for-the-document-class" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge-1-docstrings-for-the-document-class" class="callout-inner">
<h3 class="callout-title">Challenge 1: Docstrings for the Document
Class</h3>
<div class="callout-content">
<p>Add a docstring for the <code>document.py</code> module, the
<code>Document</code> class, and the <code>__init__</code> method of the
<code>Document</code> class. Make sure to include a brief summary, as
well as <code>Args</code> and <code>Returns</code> sections where
appropriate.</p>
<p>Refer to the <a href="https://google.github.io/styleguide/pyguide.html#s3.8.2-comments-in-modules" class="external-link">Google
Style Guide - Comments in Modules</a> section for guidance.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">

</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="mypy">Mypy<a class="anchor" aria-label="anchor" href="#mypy"></a></h2>
<hr class="half-width"><p>One of the common complaints about Python is that it is a dynamically
typed language, which can lead to type-related errors that are only
caught at runtime. To help mitigate this, Python supports type hints,
which allow developers to specify the expected types of variables,
function parameters, and return values.</p>
<p>We’ve been using type hints all along in this project, but as these
are only used by the IDE and the user, there’s no guarantee that the
types are actually correct. This is where <code>mypy</code> comes
in.</p>
<p>We can install <code>mypy</code> as a development dependency using
<code>uv</code>:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">uv</span> add mypy <span class="at">--dev</span></span></code></pre>
</div>
<p>Then run it on our codebase:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">uv</span> run mypy src</span></code></pre>
</div>
<p>Your output might look something like this:</p>
<pre><code>src\textanalysis_tool\readers\html_reader.py:28: error: Item "None" of "PageElement | None" has no attribute "find_next_siblings"  [union-attr]
src\textanalysis_tool\readers\html_reader.py:40: error: Return type "str" of "get_metadata" incompatible with return type "dict[Any, Any]" in supertype "textanalysis_tool.readers.base_reader.BaseReader"  [override]
src\textanalysis_tool\readers\html_reader.py:43: error: Value of type "PageElement | None" is not indexable  [index]
src\textanalysis_tool\readers\html_reader.py:44: error: Value of type "PageElement | None" is not indexable  [index]
src\textanalysis_tool\readers\html_reader.py:45: error: Value of type "PageElement | None" is not indexable  [index]
src\textanalysis_tool\readers\html_reader.py:47: error: Item "None" of "Match[str] | None" has no attribute "group"  [union-attr]
src\textanalysis_tool\readers\html_reader.py:49: error: Incompatible return value type (got "dict[str, Any]", expected "str")  [return-value]
src\textanalysis_tool\readers\epub_reader.py:3: error: Skipping analyzing "ebooklib": module is installed, but missing library stubs or py.typed marker  [import-untyped]
src\textanalysis_tool\readers\epub_reader.py:3: note: See https://mypy.readthedocs.io/en/stable/running_mypy.html#missing-imports
src\textanalysis_tool\readers\epub_reader.py:31: error: Item "None" of "Match[str] | None" has no attribute "group"  [union-attr]
Found 9 errors in 2 files (checked 7 source files)</code></pre>
<p>These errors are slightly more complex than the ones reported by
<code>ruff</code>, but they are also very useful, as the often point to
places where our code might not handle all of the possible cases
correctly.</p>
<div class="section level3">
<h3 id="fixing-mypy-errors">Fixing Mypy Errors<a class="anchor" aria-label="anchor" href="#fixing-mypy-errors"></a></h3>
<p>MyPy Errors can be a bit tricky to understand, as they often involve
a more complex analysis of the code than <code>ruff</code>.</p>
<p>For example, the first error is telling us that we are trying to
access the <code>find_next_siblings</code> method on an object that
could be <code>None</code>. This is a potential bug, as if the object is
<code>None</code>, this will raise an <code>AttributeError</code> at
runtime.</p>
<p>Looking at the project code, the issue is in the
<code>HTMLReader</code> class, in the <code>get_content</code>
method:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>    <span class="kw">def</span> get_content(<span class="va">self</span>, filepath) <span class="op">-&gt;</span> <span class="bu">dict</span>:</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>        soup <span class="op">=</span> <span class="va">self</span>.read(filepath)</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>        <span class="co"># Find the first h1 tag (The book title)</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>        title_h1 <span class="op">=</span> soup.find(<span class="st">"h1"</span>)</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>        <span class="co"># Collect all the content after the first h1</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>        content <span class="op">=</span> []</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>        <span class="cf">for</span> element <span class="kw">in</span> title_h1.find_next_siblings():</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>            text <span class="op">=</span> element.get_text(strip<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>            <span class="co"># Stop early if we hit this text, which indicate the end of the book</span></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">"END OF THE PROJECT GUTENBERG EBOOK"</span> <span class="kw">in</span> text:</span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>                <span class="cf">break</span></span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a>            <span class="cf">if</span> text:</span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a>                content.append(text)</span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"</span><span class="ch">\n\n</span><span class="st">"</span>.join(content)</span></code></pre>
</div>
<p>The <code>soup.find("h1")</code> call will return <code>None</code>
if no <code>h1</code> tag is found in the HTML document. We should
probably add a check for this case and raise a more informative error
message.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>    <span class="kw">def</span> get_content(<span class="va">self</span>, filepath) <span class="op">-&gt;</span> <span class="bu">dict</span>:</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>        soup <span class="op">=</span> <span class="va">self</span>.read(filepath)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>        <span class="co"># Find the first h1 tag (The book title)</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>        title_h1 <span class="op">=</span> soup.find(<span class="st">"h1"</span>)</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>        <span class="cf">if</span> title_h1 <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="ss">f"No &lt;h1&gt; tag found in the HTML document: </span><span class="sc">{</span>filepath<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>        <span class="co"># Collect all the content after the first h1</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>        content <span class="op">=</span> []</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>        <span class="cf">for</span> element <span class="kw">in</span> title_h1.find_next_siblings():</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>            text <span class="op">=</span> element.get_text(strip<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>            <span class="co"># Stop early if we hit this text, which indicate the end of the book</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">"END OF THE PROJECT GUTENBERG EBOOK"</span> <span class="kw">in</span> text:</span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>                <span class="cf">break</span></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a>            <span class="cf">if</span> text:</span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a>                content.append(text)</span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"</span><span class="ch">\n\n</span><span class="st">"</span>.join(content)</span></code></pre>
</div>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>Note that we don’t have to actually change the code in the for loop,
as <code>mypy</code> is smart enough to understand that if
<code>title_h1</code> is none, then the <code>ValueError</code> will be
raised, and the code following it will not be executed.</p>
</div>
</div>
</div>
<div id="challenge-1-fix-a-mypy-error" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge-1-fix-a-mypy-error" class="callout-inner">
<h3 class="callout-title">Challenge 1: Fix a Mypy Error</h3>
<div class="callout-content">
<p>Another error we get is related to the <code>get_metadata</code>
method in the same class:</p>
<pre><code>src\textanalysis_tool\readers\html_reader.py:45: error: Value of type "PageElement | None" is not indexable  [index]
src\textanalysis_tool\readers\html_reader.py:46: error: Value of type "PageElement | None" is not indexable  [index]
src\textanalysis_tool\readers\html_reader.py:47: error: Value of type "PageElement | None" is not indexable  [index]</code></pre>
<p>Why is this error being reported? What can we do to fix it? (There’s
actually two issues here! One is a more specific
<code>BeautifulSoup</code> issue, and the other is a more general Python
issue.)</p>
</div>
</div>
</div>
<div id="accordionHint1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint1" aria-expanded="false" aria-controls="collapseHint1">
  <h4 class="accordion-header" id="headingHint1"> Give me a hint </h4>
</button>
<div id="collapseHint1" class="accordion-collapse collapse" aria-labelledby="headingHint1" data-bs-parent="#accordionHint1">
<div class="accordion-body">
<p>Values in python dictionaries can be accessed in two ways:</p>
<ul><li>Using the indexing syntax: <code>value = my_dict[key]</code>
</li>
<li>Using the <code>get</code> method:
<code>value = my_dict.get(key)</code>
</li>
</ul><p>The indexing syntax will raise a <code>KeyError</code> if the key is
not found in the dictionary, while the <code>get</code> method will
return <code>None</code> (or a default value if provided) if the key is
not found.</p>
</div>
</div>
</div>
</div>
<div id="accordionHint2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint2" aria-expanded="false" aria-controls="collapseHint2">
  <h4 class="accordion-header" id="headingHint2"> Give me a hint </h4>
</button>
<div id="collapseHint2" class="accordion-collapse collapse" aria-labelledby="headingHint2" data-bs-parent="#accordionHint2">
<div class="accordion-body">
<p>There are several kinds of values that can be returned from a
<code>BeautifulSoup.find</code> call, and we can’t really be certain of
which type we will get back. It could be a <code>Tag</code>, a
<code>NavigableString</code>, a <code>PageElement</code>, or
<code>None</code>.</p>
<p>There is an alternative method called <code>select_one</code> that
can be used to find elements using plain CSS selectors, and it always
returns either a <code>Tag</code> or <code>None</code>, which lets us
avoid some of the complexity of dealing with multiple possible
types.</p>
<p><code>soup.find("meta", {"name": "dc.title"})</code> can be replaced
with <code>soup.select_one('meta[name="dc.title"]')</code></p>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>MyPy is pointing out that we are using the indexing syntax to access
values in a dictionary, but given the way we are pulling the data out of
the text, it is possible that the key might not even be present in the
dictionary.</p>
<p>We can fix this by using the <code>get</code> method instead, and
providing a default value of <code>None</code> if the key is not
found.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>title_element <span class="op">=</span> soup.select_one(<span class="st">'meta[name="dc.title"]'</span>)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>title <span class="op">=</span> title_element.get(<span class="st">"content"</span>) <span class="cf">if</span> title_element <span class="cf">else</span> <span class="st">"Unknown Title"</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>author_element <span class="op">=</span> soup.select_one(<span class="st">'meta[name="dc.creator"]'</span>)</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>author <span class="op">=</span> author_element.get(<span class="st">"content"</span>) <span class="cf">if</span> author_element <span class="cf">else</span> <span class="st">"Unknown Author"</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>url_element <span class="op">=</span> soup.select_one(<span class="st">'meta[name="dcterms.source"]'</span>)</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>url <span class="op">=</span> url_element.get(<span class="st">"content"</span>) <span class="cf">if</span> url_element <span class="cf">else</span> <span class="st">"Unknown URL"</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-2-fixing-other-mypy-errors" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge-2-fixing-other-mypy-errors" class="callout-inner">
<h3 class="callout-title">Challenge 2: Fixing Other Mypy Errors</h3>
<div class="callout-content">
<p>You should have at least one other mypy error in the
<code>HTMLReader</code> class. Can you find it and fix it? Do you have
any other mypy errors in other parts of the codebase? If so, can you fix
those as well?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>It will depend on your code!</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul><li>There are many static code analysis tools available for Python, each
with its own strengths and weaknesses.</li>
<li>Ruff is a fast linter and code formatter that can replace several
other tools, including <code>flake8</code>, <code>pylint</code>, and
<code>isort</code>.</li>
<li>MyPy is a static type checker that can help catch type-related
errors in Python code.</li>
</ul></div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="06-composition.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="08-building-and-deploying.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="06-composition.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Inheritance and
        </a>
        <a class="chapter-link float-end" href="08-building-and-deploying.html" rel="next">
          Next: Building and...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/jonathan-hartman/python-intermediate-tool/edit/main/episodes/07-static-code-analysis.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/jonathan-hartman/python-intermediate-tool/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/jonathan-hartman/python-intermediate-tool/" class="external-link">Source</a></p>
				<p><a href="https://github.com/jonathan-hartman/python-intermediate-tool/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.7" class="external-link">varnish (1.0.7)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://jonathan-hartman.github.io/python-intermediate-tool/07-static-code-analysis.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Static Code Analysis",
  "creativeWorkStatus": "active",
  "url": "https://jonathan-hartman.github.io/python-intermediate-tool/07-static-code-analysis.html",
  "identifier": "https://jonathan-hartman.github.io/python-intermediate-tool/07-static-code-analysis.html",
  "dateCreated": "2025-08-23",
  "dateModified": "2025-09-16",
  "datePublished": "2025-09-30"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

